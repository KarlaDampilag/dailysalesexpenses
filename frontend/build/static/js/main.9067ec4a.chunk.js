(this.webpackJsonpmiyap=this.webpackJsonpmiyap||[]).push([[0],{374:function(e,t,a){e.exports=a(523)},379:function(e,t,a){},523:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(50),i=a.n(c),l=(a(379),a(380),a(22)),o=a(49),s=a(23),u=a.n(s),m=a(18),d=a(4),p=a(65),f=a(142),E=a(543),g=a(59);function b(){var e=Object(l.a)(["\n    mutation logout {\n        logout\n    }\n"]);return b=function(){return e},e}var v=u()(b()),h=function(){var e=Object(o.f)(),t=Object(m.a)(v,{refetchQueries:[{query:Ht}]}),a=Object(d.a)(t,1)[0];return r.a.createElement(g.a,{onClick:function(){a(),e.push("/")}},"Logout")},y=function(e){var t=r.a.useState(""),a=Object(d.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(f.a,{mode:"horizontal",selectedKeys:[n],onClick:function(e){return c(e.key.toString())},overflowedIndicator:r.a.createElement(E.a,null),className:"app-menu"},r.a.createElement(f.a.Item,{key:"reports"},r.a.createElement(p.b,{to:"/"},"Dashboard")),r.a.createElement(f.a.Item,{key:"products"},r.a.createElement(p.b,{to:"/products"},"Products")),r.a.createElement(f.a.Item,{key:"sales"},r.a.createElement(p.b,{to:"/sales"},"Sales")),r.a.createElement(f.a.Item,{key:"expenses"},r.a.createElement(p.b,{to:"/expenses"},"Expenses")),r.a.createElement(f.a.Item,{key:"customers"},r.a.createElement(p.b,{to:"/customers"},"Customers")),r.a.createElement(f.a.Item,{key:"typeform"},r.a.createElement(p.b,{to:"/typeform"},"Request Feature / Report Bug")),r.a.createElement(f.a.Item,{key:"requestResetPassword"},r.a.createElement(p.b,{to:"/requestResetPassword"},"Reset Password")),e.user&&r.a.createElement(f.a.Item,null,r.a.createElement(h,null)),!e.user&&r.a.createElement(f.a.Item,null,r.a.createElement(p.b,{to:"/signup"},"Sign Up")),!e.user&&r.a.createElement(f.a.Item,null,r.a.createElement(p.b,{to:"/login"},"Log In"))))},O=a(13),x=a.n(O),S=a(26),I=a(7),j=a.n(I),N=a(538),w=a(361),C=a(539),P=a(544),T=a(545);function k(){var e=Object(l.a)(["\n    mutation signup($email: String!, $password: String!, $confirmPassword: String!) {\n        signup(email: $email, password: $password, confirmPassword: $confirmPassword) {\n            id\n        }\n    }\n"]);return k=function(){return e},e}var $=u()(k()),F=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),i=Object(d.a)(c,2),l=i[0],o=i[1],s=r.a.useState(),u=Object(d.a)(s,2),p=u[0],f=u[1],E=r.a.useState(),b=Object(d.a)(E,2),v=b[0],h=b[1],y=Object(m.a)($,{variables:{email:a,password:l,confirmPassword:p},refetchQueries:[{query:Ht}]}),O=Object(d.a)(y,2),j=O[0],k=O[1].loading;return r.a.createElement("div",{className:"retain-margin"},v?r.a.createElement("p",null,v):r.a.createElement(N.a,{initialValues:{remember:!0},onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l===p){e.next=4;break}w.b.error("Passwords did not match"),e.next=6;break;case 4:return e.next=6,j().then((function(){h("Please check your email ".concat(a," and click on the link to verify your account."))})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(N.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email"}]},r.a.createElement(C.a,{prefix:r.a.createElement(P.a,{className:"site-form-item-icon"}),placeholder:"E-mail",onChange:function(e){return n(e.target.value)}})),r.a.createElement(N.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password"}]},r.a.createElement(C.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password",onChange:function(e){return o(e.target.value)}})),r.a.createElement(N.a.Item,{name:"confirmPassword",rules:[{required:!0,message:"Please input your password"}]},r.a.createElement(C.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Confirm Password",onChange:function(e){return f(e.target.value)}})),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{disabled:k,loading:k,type:"primary",htmlType:"submit",className:"login-form-button"},k?"Signing Up":"Sign Up"),r.a.createElement("div",null,"Have an account? ",r.a.createElement("a",{href:"login"},"Log In")))))};function A(){var e=Object(l.a)(["\n    mutation login($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n            id\n        }\n    }\n"]);return A=function(){return e},e}var q=u()(A()),L=function(){var e=Object(o.f)(),t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState(),l=Object(d.a)(i,2),s=l[0],u=l[1],p=Object(m.a)(q,{variables:{email:n,password:s},refetchQueries:[{query:Ht}]}),f=Object(d.a)(p,2),E=f[0],b=f[1].loading;return r.a.createElement("div",{className:"retain-margin"},r.a.createElement(N.a,{initialValues:{remember:!0},onFinish:Object(S.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E().then((function(){e.push("/")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 2:case"end":return t.stop()}}),t)})))},r.a.createElement(N.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email"}]},r.a.createElement(C.a,{prefix:r.a.createElement(P.a,{className:"site-form-item-icon"}),placeholder:"E-mail",onChange:function(e){return c(e.target.value)}})),r.a.createElement(N.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password"}]},r.a.createElement(C.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)}})),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{disabled:b,loading:b,type:"primary",htmlType:"submit",className:"login-form-button"},"Log In"),r.a.createElement("div",null,"Don't have an account? ",r.a.createElement("a",{href:"signup"},"Register")))))},D=a(36),U=a(365),R=a(534),M=a(546),Q=a(547),Y=a(42),B=a(541),_=a(185),V=a(327),z=a(366);function K(){var e=Object(l.a)(["\nmutation CREATE_PRODUCT_MUTATION(\n    $name: String!\n    $salePrice: String!\n    $costPrice: String\n    $sku: String\n    $unit: String\n    $notes: String\n    $image: String\n    $largeImage: String\n    $categories: [String!]\n) {\n    createProduct(\n        name: $name\n        salePrice: $salePrice\n        costPrice: $costPrice\n        sku: $sku\n        unit: $unit\n        notes: $notes\n        image: $image\n        largeImage: $largeImage\n        categories: $categories\n    ) {\n        id\n        name\n        salePrice\n        costPrice\n        unit\n        sku\n        categories\n        notes\n        image\n        largeImage  \n        createdAt\n    }\n}\n"]);return K=function(){return e},e}var W=u()(K()),X={labelCol:{span:8},wrapperCol:{span:16}},J={wrapperCol:{offset:0,span:24}},G=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState(),l=Object(d.a)(i,2),o=l[0],s=l[1],u=r.a.useState(),p=Object(d.a)(u,2),f=p[0],E=p[1],b=r.a.useState(),v=Object(d.a)(b,2),h=v[0],y=v[1],O=r.a.useState(),j=Object(d.a)(O,2),P=j[0],T=j[1],k=r.a.useState(),$=Object(d.a)(k,2),F=$[0],A=$[1],q=r.a.useState(null),L=Object(d.a)(q,2),D=L[0],U=L[1],R=r.a.useState(null),M=Object(d.a)(R,2),Q=M[0],K=M[1],G=r.a.useState([]),H=Object(d.a)(G,2),Z=H[0],ee=H[1],te=r.a.useState([]),ae=Object(d.a)(te,2),ne=ae[0],re=ae[1],ce=r.a.useState(!1),ie=Object(d.a)(ce,2),le=ie[0],oe=ie[1],se=r.a.useState(!1),ue=Object(d.a)(se,2),me=ue[0],de=ue[1],pe=[];e.categories&&(pe=I.map(e.categories,(function(e){return e.name})));var fe=N.a.useForm(),Ee=Object(d.a)(fe,1)[0],ge=function(){var e=Object(S.a)(x.a.mark((function e(t){var a,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files?t.target.files:[],(n=new FormData).append("file",a[0]),n.append("upload_preset","sickfits"),de(!0),e.next=7,fetch("https://api.cloudinary.com/v1_1/dlki0o7xf/image/upload",{method:"POST",body:n});case 7:return r=e.sent,e.next=10,r.json();case 10:(c=e.sent)&&c.secure_url&&c.eager?(U(c.secure_url),K(c.eager[0].secure_url)):(U(null),K(null)),de(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=Object(m.a)(W,{variables:{name:n,salePrice:o,costPrice:f,sku:h,unit:P,notes:F,image:D,largeImage:Q,categories:Z},update:function(e,t){var a=t.data.createProduct,n=e.readQuery({query:je});n={productsByUser:[].concat(Object(Y.a)(n.productsByUser),[a])},e.writeQuery({query:je,data:n})}}),ve=Object(d.a)(be,2),he=ve[0],ye=ve[1].loading,Oe=Object(m.a)(Ne,{variables:{names:ne},update:function(e,t){var a=e.readQuery({query:we});a.categoriesByUser=[].concat(Object(Y.a)(a.categoriesByUser),Object(Y.a)(t.data.createCategories)),e.writeQuery({query:we,data:a})}}),xe=Object(d.a)(Oe,2),Se=xe[0],Ie=xe[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Add a Product",visible:le,onCancel:function(){return oe(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{form:Ee,onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ne&&ne.length>0)){e.next=3;break}return e.next=3,Se().catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 3:return e.next=5,he().then((function(){oe(!1),Ee.resetFields(),U(null),w.b.success("Product added")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 5:case"end":return e.stop()}}),e)})))}),r.a.createElement(N.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"This field is required"}]},r.a.createElement(C.a,{value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Sale Price",name:"salePrice",rules:[{required:!0,message:"This field is required"}]},r.a.createElement(C.a,{type:"number",onChange:function(e){return s(e.target.value.toString())}})),r.a.createElement(N.a.Item,{label:"Cost Price",name:"costPrice"},r.a.createElement(C.a,{type:"number",onChange:function(e){return E(e.target.value.toString())}})),r.a.createElement(N.a.Item,{label:"SKU",name:"sku"},r.a.createElement(C.a,{value:h,onChange:function(e){return y(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Unit",name:"unit"},r.a.createElement(C.a,{value:P,onChange:function(e){return T(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Categories",name:"categories"},r.a.createElement(_.a,{value:Z,mode:"tags",placeholder:"Start typing to add...",onChange:function(e){ee(e);var t=I.filter(e,(function(e){return pe.indexOf(e)<0}));re(t)}},I.map(pe,(function(e,t){return r.a.createElement(_.a.Option,{value:e,key:t},e)})))),r.a.createElement(N.a.Item,{label:"Notes",name:"notes"},r.a.createElement(C.a,{value:F,onChange:function(e){return A(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Image",name:"image"},r.a.createElement(C.a,{type:"file",placeholder:"Upload an image",onChange:ge}),me&&r.a.createElement(V.a,null),D&&r.a.createElement("img",{src:D,width:"200",alt:"upload preview"})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",loading:ye||Ie,style:{width:"100%"}},"Add",ye||Ie?"ing ":" "," Product")))),r.a.createElement(g.a,{onClick:function(){return oe(!0)},size:"large",icon:r.a.createElement(z.a,null),className:"add-button btn-add-margin-left"},r.a.createElement("span",{className:"no-550"},"Add Product")))};function H(){var e=Object(l.a)(["\n    mutation UPDATE_PRODUCT_MUTATION(\n        $id: ID!\n        $name: String\n        $salePrice: String\n        $costPrice: String\n        $sku: String\n        $unit: String\n        $notes: String\n        $image: String\n        $largeImage: String\n        $categories: [String!]\n    ) {\n        updateProduct(\n            id: $id\n            name: $name\n            salePrice: $salePrice\n            costPrice: $costPrice\n            sku: $sku\n            unit: $unit\n            notes: $notes\n            image: $image\n            largeImage: $largeImage\n            categories: $categories\n        ) {\n            id\n            name\n            salePrice\n            costPrice\n            unit\n            sku\n            categories\n            notes\n            image\n            largeImage\n            createdAt\n        }\n    }\n"]);return H=function(){return e},e}var Z=u()(H()),ee=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState(),l=Object(d.a)(i,2),o=l[0],s=l[1],u=r.a.useState(),p=Object(d.a)(u,2),f=p[0],E=p[1],b=r.a.useState(),v=Object(d.a)(b,2),h=v[0],y=v[1],O=r.a.useState(),j=Object(d.a)(O,2),P=j[0],T=j[1],k=r.a.useState(),$=Object(d.a)(k,2),F=$[0],A=$[1],q=r.a.useState(null),L=Object(d.a)(q,2),D=L[0],U=L[1],R=r.a.useState(null),M=Object(d.a)(R,2),Q=M[0],Y=M[1],z=r.a.useState(e.product.categories),K=Object(d.a)(z,2),W=K[0],G=K[1],H=r.a.useState([]),ee=Object(d.a)(H,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(d.a)(ne,2),ce=re[0],ie=re[1],le=r.a.useState(!1),oe=Object(d.a)(le,2),se=oe[0],ue=oe[1],me=[];e.categories&&(me=I.map(e.categories,(function(e){return e.name})));var de=Object(m.a)(Z,{variables:{id:e.product.id,name:n,salePrice:o,costPrice:f,sku:h,unit:P,notes:F,image:D,largeImage:Q,categories:W},refetchQueries:[{query:je}]}),pe=Object(d.a)(de,2),fe=pe[0],Ee=pe[1].loading,ge=Object(m.a)(Ne,{variables:{names:te}}),be=Object(d.a)(ge,1)[0],ve=function(){var e=Object(S.a)(x.a.mark((function e(t){var a,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files?t.target.files:[],(n=new FormData).append("file",a[0]),n.append("upload_preset","sickfits"),ue(!0),e.next=7,fetch("https://api.cloudinary.com/v1_1/dlki0o7xf/image/upload",{method:"POST",body:n});case 7:return r=e.sent,e.next=10,r.json();case 10:(c=e.sent)&&c.secure_url&&c.eager?(U(c.secure_url),Y(c.eager[0].secure_url)):(U(null),Y(null)),ue(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Update Product",visible:ce,onCancel:function(){return ie(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{initialValues:{name:e.product.name,salePrice:e.product.salePrice,costPrice:e.product.costPrice,sku:e.product.sku,unit:e.product.unit,notes:e.product.notes},onFinish:function(){var t=Object(S.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(te&&te.length>0)){t.next=3;break}return t.next=3,be().catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot update. Please contact SourceCodeXL.")}));case 3:return D||U(e.product.image),t.next=6,fe().then((function(){w.b.success("Product updated"),ie(!1)})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot update. Please contact SourceCodeXL.")}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement(N.a.Item,{label:"Name",name:"name"},r.a.createElement(C.a,{onChange:function(e){return c(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Sale Price",name:"salePrice"},r.a.createElement(C.a,{type:"number",onChange:function(e){return s(e.target.value.toString())}})),r.a.createElement(N.a.Item,{label:"Cost Price",name:"costPrice"},r.a.createElement(C.a,{type:"number",onChange:function(e){return E(e.target.value.toString())}})),r.a.createElement(N.a.Item,{label:"SKU",name:"sku"},r.a.createElement(C.a,{onChange:function(e){return y(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Unit",name:"unit"},r.a.createElement(C.a,{onChange:function(e){return T(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Categories"},r.a.createElement(_.a,{mode:"tags",value:W,onChange:function(e){G(e);var t=I.filter(e,(function(e){return me.indexOf(e)<0}));ae(t)}},me.map((function(e,t){return r.a.createElement(_.a.Option,{value:e,key:t},e)})))),r.a.createElement(N.a.Item,{label:"Notes",name:"notes"},r.a.createElement(C.a,{onChange:function(e){return A(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Image"},r.a.createElement(C.a,{type:"file",accept:"image/png, image/jpeg",placeholder:"Upload an image",onChange:ve}),se&&r.a.createElement(V.a,null),D?r.a.createElement("img",{src:D,width:"200",alt:"upload preview"}):e.product.image&&r.a.createElement("img",{src:e.product.image,width:"200",alt:"current preview"})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:se||Ee,loading:Ee,style:{width:"100%"}},"Updat",Ee?"ing":"e"," Product")))),r.a.createElement(g.a,{onClick:function(){return ie(!0)}},r.a.createElement("span",{"aria-label":"edit",role:"img"},"\u270f\ufe0f")))},te=a(542),ae=function(e){return r.a.createElement(te.a,{title:"Are you sure to delete? This action is irreversible!",okText:"Delete",cancelText:"Cancel",onConfirm:e.onDelete},r.a.createElement(g.a,{onClick:e.onClick,className:e.className},r.a.createElement("span",{"aria-label":"delete",role:"img"},"\u274c")))},ne=function(e){return function(t){var a=r.a.useState(window.innerWidth),n=Object(d.a)(a,2),c=n[0],i=n[1],l=function(){i(window.innerWidth)};return r.a.useEffect((function(){return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}}),[]),r.a.createElement(e,Object.assign({},t,{windowWidth:c}))}},re={defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,position:["bottomLeft"]},ce=a(28),ie=a.n(ce),le=a(242),oe=a(56),se=function(e){var t=ue(e.saleItems),a=me(e.saleItems),n=e.discountValue?parseFloat(e.discountValue):0;return t-("FLAT"===e.discountType?n:a*(n/100))},ue=function(e){var t=0;return I.each(e,(function(e){var a=e.salePrice?parseFloat(e.salePrice):0,n=e.costPrice?parseFloat(e.costPrice):0,r=parseFloat(Number(a-n).toFixed(3)),c=parseFloat(Number(r*e.quantity).toFixed(3));t+=c})),t},me=function(e){var t=0;return I.each(e,(function(e){var a=e.salePrice?parseFloat(e.salePrice):0;t+=a*e.quantity})),t},de=function(e){var t=me(e.saleItems),a=t,n=e.discountValue?parseFloat(e.discountValue):0,r=e.taxValue?parseFloat(e.taxValue):0,c=e.shipping?parseFloat(e.shipping):0;return a=(a-="FLAT"===e.discountType?n:t*(n/100))+("FLAT"===e.taxType?r:a*(r/100))+c,parseFloat(Number(a).toFixed(2))},pe=function(e,t,a){var n=I.filter(e,(function(e){return e.timestamp>=t&&e.timestamp<=a})),r=0;return I.forEach(n,(function(e){var t=se(e);r+=t})),r},fe=function(e,t,a){var n=I.filter(e,(function(e){return e.timestamp>=t&&e.timestamp<=a})),r=0;return I.forEach(n,(function(e){r+=parseFloat(e.cost)})),r},Ee=function(e,t,a){var n=I.filter(e,(function(e){return e.timestamp>=t&&e.timestamp<=a})),r=0;return I.forEach(n,(function(e){var t=function(e){var t,a=0,n=Object(oe.a)(e.saleItems);try{for(n.s();!(t=n.n()).done;){a+=t.value.quantity}}catch(r){n.e(r)}finally{n.f()}return a}(e);r+=t})),r},ge=function(e,t,a,n){var r=function(e,t){for(var a=e.clone(),n=[];t>a||a.format("M")===t.format("M");)n.push(ie()(a)),a.add(1,"month");return n}(a,n),c=[];return I.forEach(r,(function(a){var n={dateName:a.format("MM-YYYY"),profit:0,expenses:0},r=a.startOf("month").unix(),i=a.endOf("month").unix();n.profit=pe(e,r,i),n.expenses=fe(t,r,i),c.push(n)})),c},be=function(e,t,a,n){var r=I.filter(e,(function(e){return e.timestamp>=t&&e.timestamp<=a})),c=I.chain(r).filter((function(e){return e.customer})).groupBy((function(e){return e.customer.id})).value(),i=[];I.forEach(c,(function(e,t){var a={customer:null,transactions:e.length,units:0,revenue:0,profit:0},n=c[t];a.customer=n[0].customer;var r=0,l=0,o=0;I.forEach(n,(function(e){var t=function(e){var t={quantityTotal:0,revenueTotal:0};return I.forEach(e.saleItems,(function(e){t.quantityTotal+=e.quantity;var a=e.quantity*e.salePrice;t.revenueTotal+=a})),t}(e);r+=t.quantityTotal;var a=t.revenueTotal;l+=+a.toFixed(2);var n=se(e);o+=n})),a.units=r,a.revenue=l,a.profit=o,i.push(a)}));var l=I.orderBy(i,"profit","desc");return n?I.slice(l,0,n):l},ve=function e(t,a,n){if(t&&!a)return 1;if(a&&!t)return-1;if(!t&&!a)return 0;var r=t[n],c=a[n],i=0;if("customer"===n)return e(r,c,"name");if("address"===n){var l=["street1","street2","city","state","zipCode","country"],o=I.pick(t,l),s=I.pick(a,l),u=I.filter(Object.values(o),(function(e){return e})).join(", "),m=I.filter(Object.values(s),(function(e){return e})).join(", ");return u.localeCompare(m)}switch(typeof r){case"string":i=r.localeCompare(c);break;case"number":i=r-c}return i},he=function(e){return{filterDropdown:function(e){var t=e.setSelectedKeys,a=e.selectedKeys,n=e.confirm,c=e.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(C.a,{placeholder:"Search",value:a[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:n,style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(g.a,{type:"primary",onClick:n,icon:r.a.createElement(le.a,null),size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(g.a,{onClick:c,size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return r.a.createElement(le.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){var n,r;if("categories"===e)return(null===(n=a.categories)||void 0===n?void 0:n.toString()).toLowerCase().includes(t.toString().toLowerCase());if("timestamp"===e)return ie.a.unix(a.timestamp).format("DD MMMM YYYY").toLowerCase().includes(t.toString().toLowerCase());if("createdAt"===e)return ie()(a.createdAt).format("DD MMMM YYYY").toLowerCase().includes(t.toString().toLowerCase());if("saleItems"===e)return I.map(a.saleItems,(function(e){return e.product.name})).toString().toLowerCase().includes(t.toString().toLowerCase());if("customer"===e){var c,i=null===(c=a.customer)||void 0===c?void 0:c.name;return!!i&&i.toLowerCase().includes(t.toLowerCase())}if("address"===e){var l=I.pick(a,["street1","street2","city","state","zipCode","country"]);return I.filter(Object.values(l),(function(e){return e})).join(", ").toLowerCase().includes(t.toLowerCase())}return"subtotal"===e?me(a.saleItems).toString().includes(t.toString()):"total"===e?de(a).toString().includes(t.toString()):"profit"===e?se(a).toString().includes(t.toString()):"productNameFromTopSellingProducts"===e?a.product.name.toString().toLowerCase().includes(t.toString().toLowerCase()):"categoryFromTopSellingProducts"===e?(null===(r=a.product.categories)||void 0===r?void 0:r.toString()).toLowerCase().includes(t.toString().toLowerCase()):"categoryFromTopSellingCategories"===e?a.category.toLowerCase().includes(t.toString().toLowerCase()):!!a[e]&&a[e].toString().toLowerCase().includes(t.toString().toLowerCase())}}},ye=function(e){var t=e;return"string"===typeof t&&(t=Number(t)),new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(t)};function Oe(){var e=Object(l.a)(["\n    mutation DELETE_PRODUCT_MUTATION($id: ID!) {\n        deleteProduct(id: $id) {\n            id\n            name\n            salePrice\n            costPrice\n            unit\n            categories\n            notes\n            image\n            createdAt\n        }\n    }\n"]);return Oe=function(){return e},e}function xe(){var e=Object(l.a)(["\n    {\n        categoriesByUser{\n            id\n            name\n        }\n    }\n"]);return xe=function(){return e},e}function Se(){var e=Object(l.a)(["\n    mutation CREATE_CATEGORIES_MUTATION($names: [String!]!) {\n        createCategories(names: $names) {\n            id\n            name\n        }\n    }\n"]);return Se=function(){return e},e}function Ie(){var e=Object(l.a)(["\n    {\n        productsByUser {\n            id\n            name\n            salePrice\n            costPrice\n            unit\n            sku\n            categories\n            notes\n            image\n            largeImage\n            createdAt\n        }\n    }\n"]);return Ie=function(){return e},e}var je=u()(Ie()),Ne=u()(Se()),we=u()(xe()),Ce=u()(Oe()),Pe=ne((function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=Object(m.b)(je),l=i.data,o=i.loading,s=l?l.productsByUser:null,u=Object(m.b)(we).data,p=u?u.categoriesByUser:null,f=Object(m.a)(Ce,{variables:{id:n},update:function(e,t){var a=e.readQuery({query:je}),n=I.filter(a.productsByUser,(function(e){return e.id!==t.data.deleteProduct.id}));e.writeQuery({query:je,data:{productsByUser:n}})}}),E=Object(d.a)(f,1)[0],g=function(e){var t=e.product,a=t.name,n=t.image,c=t.salePrice,i=t.costPrice,l=t.sku,o=t.categories,s=t.notes;return r.a.createElement("div",{className:"product-detail-mobile"},r.a.createElement("div",{className:"bring-550"},r.a.createElement("p",null,r.a.createElement(ee,{product:e.product,categories:p}),r.a.createElement(ae,{className:"btn-add-margin-left",onClick:function(){return e.setIdForDeletion(e.product.id)},onDelete:b}))),r.a.createElement("div",null,n&&r.a.createElement("img",{src:n,alt:a,className:"product-img"})),r.a.createElement("div",null,r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Sale Price:")," ",r.a.createElement("span",null,ye(c))),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Cost Price:")," ",r.a.createElement("span",null,ye(i))),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"SKU:")," ",r.a.createElement("span",null,l)),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Categories:"),r.a.createElement("span",null,I.map(o,(function(e){return r.a.createElement(U.a,{key:e},e)})))),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Notes:")," ",r.a.createElement("span",null,s))))},b=r.a.useCallback(Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.b.info("Please wait..."),e.next=3,E().then((function(){w.b.success("Product deleted")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot delete product. Please contact SourceCodeXL.")}));case 3:case"end":return e.stop()}}),e)}))),[E]),v=r.a.useMemo((function(){return e.windowWidth>=1301?void 0:{expandedRowRender:function(e){return r.a.createElement(g,{product:e,setIdForDeletion:c,onDelete:b})},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(M.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-1300"}):r.a.createElement(Q.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-1300"})}}}),[e.windowWidth,b]);return r.a.createElement(ea.Consumer,null,(function(e){return e?e&&!e.verified?r.a.createElement("p",{className:"retain-margin"},"Your email must be verified to access this page."):r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{categories:p}),r.a.createElement(R.a,{bordered:!0,loading:o,dataSource:s,rowKey:"id",expandable:v,pagination:re,columns:[{dataIndex:"image",render:function(e,t){return e?r.a.createElement("img",{src:e,alt:t.name,width:"150px"}):null},className:"no-700"},Object(D.a)({title:"Name",dataIndex:"name",sorter:function(e,t){return ve(e,t,"name")}},he("name")),Object(D.a)({title:r.a.createElement("div",null,r.a.createElement("span",{className:"no-1300"},"Sale "),"Price"),dataIndex:"salePrice",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e))},sorter:function(e,t){return ve(e,t,"salePrice")}},he("salePrice")),Object(D.a)({title:"Cost Price",dataIndex:"costPrice",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e))},sorter:function(e,t){return ve(e,t,"costPrice")}},he("costPrice"),{className:"no-1300"}),Object(D.a)({title:"SKU",dataIndex:"sku",sorter:function(e,t){return ve(e,t,"sku")}},he("sku"),{className:"no-1000"}),Object(D.a)({title:"Categories",dataIndex:"categories",render:function(e){return I.map(e,(function(e){return r.a.createElement(U.a,{key:e},e)}))}},he("categories"),{className:"no-1000"}),Object(D.a)({title:"Notes",dataIndex:"notes",sorter:function(e,t){return ve(e,t,"notes")}},he("notes"),{className:"no-1300"}),{title:"Edit",dataIndex:"id",key:"edit",render:function(e,t){return r.a.createElement(ee,{product:t,categories:p})},className:"no-550"},{title:"Delete ",dataIndex:"id",key:"edit",render:function(e){return r.a.createElement(ae,{onClick:function(){return c(e)},onDelete:b})},className:"no-550"}]})):r.a.createElement("p",{className:"retain-margin"},"You must be logged in to access this page.")}))}));function Te(){var e=Object(l.a)(["\nmutation CREATE_INVENTORY_MUTATION(\n    $name: String!\n) {\n    createInventory(\n        name: $name\n    ) {\n        id\n        name\n        createdAt\n        inventoryItems {\n            id\n        }\n    }\n}\n"]);return Te=function(){return e},e}var ke=u()(Te()),$e=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),i=Object(d.a)(c,2),l=i[0],o=i[1],s=N.a.useForm(),u=Object(d.a)(s,1)[0],p=Object(m.a)(ke,{variables:{name:a},update:function(e,t){var a=t.data.createInventory,n=e.readQuery({query:Ue});n={inventoriesByUser:[].concat(Object(Y.a)(n.inventoriesByUser),[a])},e.writeQuery({query:Ue,data:n})}}),f=Object(d.a)(p,2),E=f[0],b=f[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Add an Inventory",visible:l,onCancel:function(){return o(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{form:u,onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().then((function(){o(!1),u.resetFields(),w.b.success("Inventory added")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 2:case"end":return e.stop()}}),e)})))}),r.a.createElement(N.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"This field is required"}]},r.a.createElement(C.a,{value:a,onChange:function(e){return n(e.target.value)}})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",loading:b},"Add",b?"ing ":" "," Inventory"),r.a.createElement(g.a,{onClick:function(){return o(!1)}},"Cancel")))),r.a.createElement(g.a,{onClick:function(){return o(!0)},size:"large",icon:r.a.createElement(z.a,null),className:"add-button"},"Add Inventory"))};function Fe(){var e=Object(l.a)(["\n    mutation UPDATE_INVENTORY_MUTATION(\n        $id: ID!\n        $name: String\n    ) {\n        updateInventory(\n            id: $id\n            name: $name\n        ) {\n            id\n            name\n        }\n    }\n"]);return Fe=function(){return e},e}var Ae=u()(Fe()),qe=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState(!1),l=Object(d.a)(i,2),o=l[0],s=l[1],u=Object(m.a)(Ae,{variables:{id:e.inventory.id,name:n}}),p=Object(d.a)(u,2),f=p[0],E=p[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Update Inventory",visible:o,onCancel:function(){return s(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{onFinish:function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().then((function(){w.b.success("Inventory updated"),s(!1)})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot update. Please contact SourceCodeXL.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(N.a.Item,{label:"Name",name:"name"},r.a.createElement(C.a,{defaultValue:e.inventory.name,onChange:function(e){return c(e.target.value)}})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:E,loading:E},"Updat",E?"ing":"e"," Inventory")))),r.a.createElement(g.a,{onClick:function(){return s(!0)}},"Edit"))};function Le(){var e=Object(l.a)(["\n    mutation DELETE_INVENTORY_MUTATION($id: ID!) {\n        deleteInventory(id: $id) {\n            id\n            name\n            createdAt\n        }\n    }\n"]);return Le=function(){return e},e}function De(){var e=Object(l.a)(["\n    {\n        inventoriesByUser(orderBy: createdAt_DESC) {\n            id\n            name\n            inventoryItems {\n                id\n                product {\n                    id\n                    name\n                    unit\n                }\n                amount\n                createdAt\n            }\n        }\n    }\n"]);return De=function(){return e},e}var Ue=u()(De()),Re=u()(Le()),Me=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(m.b)(Ue),i=c.data,l=c.loading,o=i?i.inventoriesByUser:null,s=Object(m.a)(Re,{variables:{id:a},update:function(e,t){var a=e.readQuery({query:Ue}),n=I.filter(a.inventoriesByUser,(function(e){return e.id!==t.data.deleteInventory.id}));e.writeQuery({query:Ue,data:{inventoriesByUser:n}})}}),u=Object(d.a)(s,1)[0];return r.a.createElement(ea.Consumer,null,(function(e){return e?e&&!e.verified?r.a.createElement("p",{className:"retain-margin"},"Your email must be verified to access this page."):r.a.createElement(r.a.Fragment,null,r.a.createElement($e,null),r.a.createElement(R.a,{loading:l,dataSource:o,rowKey:"id",columns:[{title:"Name",dataIndex:"name"},{title:"View Stock",dataIndex:"id",render:function(e){return r.a.createElement(p.b,{to:"/inventory?id=".concat(e)},r.a.createElement(g.a,null,"View Stock"))}},{title:"Edit \u270f\ufe0f",dataIndex:"id",key:"edit",render:function(e,t){return r.a.createElement(qe,{inventory:t})}},{title:"Delete ",dataIndex:"id",key:"edit",render:function(e){return r.a.createElement(ae,{onClick:function(){return n(e)},onDelete:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.b.info("Please wait..."),e.next=3,u().then((function(){w.b.success("Inventory deleted")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot delete. Please contact SourceCodeXL.")}));case 3:case"end":return e.stop()}}),e)})))})}}]})):r.a.createElement("p",{className:"retain-margin"},"You must be logged in to access this page.")}))};function Qe(){var e=Object(l.a)(["\nmutation CREATE_CUSTOMER_MUTATION(\n    $name: String!\n    $email: String\n    $phone: String\n    $street1: String\n    $street2: String\n    $city: String\n    $state: String\n    $zipCode: String\n    $country: String\n) {\n    createCustomer(\n        name: $name\n        email: $email\n        phone: $phone\n        street1: $street1\n        street2: $street2\n        city: $city\n        state: $state\n        zipCode: $zipCode\n        country: $country\n    ) {\n        id\n        name\n        email\n        phone\n        street1\n        street2\n        city\n        state\n        zipCode\n        country\n        createdAt\n    }\n}\n"]);return Qe=function(){return e},e}var Ye=u()(Qe()),Be=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),i=Object(d.a)(c,2),l=i[0],o=i[1],s=r.a.useState(""),u=Object(d.a)(s,2),p=u[0],f=u[1],E=r.a.useState(),b=Object(d.a)(E,2),v=b[0],h=b[1],y=r.a.useState(),O=Object(d.a)(y,2),j=O[0],P=O[1],T=r.a.useState(),k=Object(d.a)(T,2),$=k[0],F=k[1],A=r.a.useState(),q=Object(d.a)(A,2),L=q[0],D=q[1],U=r.a.useState(),R=Object(d.a)(U,2),M=R[0],Q=R[1],_=r.a.useState(),V=Object(d.a)(_,2),K=V[0],W=V[1],G=r.a.useState(!1),H=Object(d.a)(G,2),Z=H[0],ee=H[1],te=N.a.useForm(),ae=Object(d.a)(te,1)[0],ne=Object(m.a)(Ye,{variables:{name:a,email:l,phone:p,street1:v,street2:j,city:$,state:L,zipCode:M,country:K},update:function(e,t){var a=t.data.createCustomer,n=e.readQuery({query:Xe});n={customersByUser:[].concat(Object(Y.a)(n.customersByUser),[a])},e.writeQuery({query:Xe,data:n})}}),re=Object(d.a)(ne,2),ce=re[0],ie=re[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Add a Customer",visible:Z,onCancel:function(){return ee(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{form:ae,onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce().then((function(){ee(!1),ae.resetFields(),w.b.success("Customer added")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 2:case"end":return e.stop()}}),e)})))}),r.a.createElement(N.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"This field is required"}]},r.a.createElement(C.a,{value:a,onChange:function(e){return n(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Email",name:"email",rules:[{type:"email"}]},r.a.createElement(C.a,{value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Phone",name:"phone"},r.a.createElement(C.a,{value:p,onChange:function(e){return f(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Street1",name:"street1"},r.a.createElement(C.a,{value:v,onChange:function(e){return h(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Street2",name:"street2"},r.a.createElement(C.a,{value:j,onChange:function(e){return P(e.target.value)}})),r.a.createElement(N.a.Item,{label:"City",name:"city"},r.a.createElement(C.a,{value:$,onChange:function(e){return F(e.target.value)}})),r.a.createElement(N.a.Item,{label:"State",name:"state"},r.a.createElement(C.a,{value:L,onChange:function(e){return D(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Zip Code",name:"zipCode"},r.a.createElement(C.a,{value:M,onChange:function(e){return Q(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Country",name:"country"},r.a.createElement(C.a,{value:K,onChange:function(e){return W(e.target.value)}})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",loading:ie},"Add",ie?"ing ":" "," Customer"),r.a.createElement(g.a,{onClick:function(){return ee(!1)}},"Cancel")))),r.a.createElement(g.a,{onClick:function(){return ee(!0)},size:"large",icon:r.a.createElement(z.a,null),className:"add-button btn-add-margin-left"},"Add Customer"))};function _e(){var e=Object(l.a)(["\n    mutation UPDATE_CUSTOMER_MUTATION(\n        $id: ID!\n        $name: String\n        $email: String\n        $phone: String\n        $street1: String\n        $street2: String\n        $city: String\n        $state: String\n        $zipCode: String\n        $country: String\n    ) {\n      updateCustomer(\n            id: $id\n            name: $name\n            email: $email\n            phone: $phone\n            street1: $street1\n            street2: $street2\n            city: $city\n            state: $state\n            zipCode: $zipCode\n            country: $country\n        ) {\n            id\n            name\n            email\n            phone\n            street1\n            street2\n            city\n            state\n            zipCode\n            country\n            createdAt\n        }\n    }\n"]);return _e=function(){return e},e}var Ve=u()(_e()),ze=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState(),l=Object(d.a)(i,2),o=l[0],s=l[1],u=r.a.useState(),p=Object(d.a)(u,2),f=p[0],E=p[1],b=r.a.useState(),v=Object(d.a)(b,2),h=v[0],y=v[1],O=r.a.useState(),j=Object(d.a)(O,2),P=j[0],T=j[1],k=r.a.useState(),$=Object(d.a)(k,2),F=$[0],A=$[1],q=r.a.useState(),L=Object(d.a)(q,2),D=L[0],U=L[1],R=r.a.useState(),M=Object(d.a)(R,2),Q=M[0],Y=M[1],_=r.a.useState(),V=Object(d.a)(_,2),z=V[0],K=V[1],W=r.a.useState(!1),G=Object(d.a)(W,2),H=G[0],Z=G[1],ee=Object(m.a)(Ve,{variables:{id:e.customer.id,name:n,email:o,phone:f,street1:h,street2:P,city:F,state:D,zipCode:Q,country:z},refetchQueries:[{query:Xe}]}),te=Object(d.a)(ee,2),ae=te[0],ne=te[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Update Customer",visible:H,onCancel:function(){return Z(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{initialValues:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,street1:e.customer.street1,street2:e.customer.street2,city:e.customer.city,state:e.customer.state,zipCode:e.customer.zipCode,country:e.customer.country},onFinish:function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().then((function(){w.b.success("Customer updated"),Z(!1)})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot update. Please contact SourceCodeXL.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(N.a.Item,{label:"Name",name:"name"},r.a.createElement(C.a,{onChange:function(e){return c(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Email",name:"email",rules:[{type:"email"}]},r.a.createElement(C.a,{onChange:function(e){return s(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Phone",name:"phone"},r.a.createElement(C.a,{onChange:function(e){return E(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Street1",name:"street1"},r.a.createElement(C.a,{onChange:function(e){return y(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Street2",name:"street2"},r.a.createElement(C.a,{onChange:function(e){return T(e.target.value)}})),r.a.createElement(N.a.Item,{label:"City",name:"city"},r.a.createElement(C.a,{onChange:function(e){return A(e.target.value)}})),r.a.createElement(N.a.Item,{label:"State",name:"state"},r.a.createElement(C.a,{onChange:function(e){return U(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Zip Code",name:"zipCode"},r.a.createElement(C.a,{onChange:function(e){return Y(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Country",name:"country"},r.a.createElement(C.a,{onChange:function(e){return K(e.target.value)}})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:ne,loading:ne},"Updat",ne?"ing":"e"," Customer")))),r.a.createElement(g.a,{onClick:function(){return Z(!0)}},r.a.createElement("span",{"aria-label":"edit",role:"img"},"\u270f\ufe0f")))};function Ke(){var e=Object(l.a)(["\n    mutation DELETE_CUSTOMER_MUTATION($id: ID!) {\n        deleteCustomer(id: $id) {\n            id\n            name\n            createdAt\n        }\n    }\n"]);return Ke=function(){return e},e}function We(){var e=Object(l.a)(["\n    {\n        customersByUser(orderBy: createdAt_DESC) {\n            id\n            name\n            email\n            phone\n            street1\n            street2\n            city\n            state\n            zipCode\n            country\n            createdAt\n        }\n    }\n"]);return We=function(){return e},e}var Xe=u()(We()),Je=u()(Ke()),Ge=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(m.b)(Xe),i=c.data,l=c.loading,o=i?i.customersByUser:null,s=Object(m.a)(Je,{variables:{id:a},update:function(e,t){var a=e.readQuery({query:Xe}),n=I.filter(a.customersByUser,(function(e){return e.id!==t.data.deleteCustomer.id}));e.writeQuery({query:Xe,data:{customersByUser:n}})}}),u=Object(d.a)(s,1)[0],p=["street1","street2","city","state","zipCode","country"],f=function(e){var t=e.customer,a=t.email,n=t.phone,c=I.pick(e.customer,p),i=I.filter(Object.values(c),(function(e){return e})).join(", ");return r.a.createElement("div",{className:"customer-detail-mobile"},r.a.createElement("div",{className:"bring-700"},r.a.createElement("p",null,r.a.createElement(ze,{customer:e.customer}),r.a.createElement(ae,{className:"btn-add-margin-left",onClick:function(){return e.setIdForDeletion(e.customer.id)},onDelete:e.onDelete}))),r.a.createElement("div",null,r.a.createElement("div",{className:"bring-500"},r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Email:")," ",r.a.createElement("span",null,a))),r.a.createElement("div",{className:"bring-500"},r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Phone:")," ",r.a.createElement("span",null,n))),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Address:"),r.a.createElement("span",null,i))))},E=function(){var e=Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.b.info("Please wait..."),e.next=3,u().then((function(){w.b.success("Customer deleted")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot delete. Please contact SourceCodeXL.")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ea.Consumer,null,(function(e){return e?e&&!e.verified?r.a.createElement("p",{className:"retain-margin"},"Your email must be verified to access this page."):r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,null),r.a.createElement(R.a,{loading:l,dataSource:o,rowKey:"id",pagination:re,expandable:{expandedRowRender:function(e){return r.a.createElement(f,{customer:e,setIdForDeletion:n,onDelete:E})},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(M.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-900"}):r.a.createElement(Q.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-900"})}},columns:[Object(D.a)({title:"Name",dataIndex:"name",sorter:function(e,t){return ve(e,t,"name")}},he("name")),Object(D.a)({title:"Email",dataIndex:"email",sorter:function(e,t){return ve(e,t,"email")}},he("email"),{className:"no-500"}),Object(D.a)({title:"Phone",dataIndex:"phone",sorter:function(e,t){return ve(e,t,"phone")}},he("phone"),{className:"no-500"}),Object(D.a)({title:"Address",dataIndex:"id",key:"address",render:function(e,t){var a=I.pick(t,p);return I.filter(Object.values(a),(function(e){return e})).join(", ")},sorter:function(e,t){return ve(e,t,"address")}},he("address"),{className:"no-900"}),{title:"Edit",dataIndex:"id",key:"edit",render:function(e,t){return r.a.createElement(ze,{customer:t})},className:"no-700"},{title:"Delete ",dataIndex:"id",key:"edit",render:function(e){return r.a.createElement(ae,{onClick:function(){return n(e)},onDelete:E})},className:"no-700"}]})):r.a.createElement("p",{className:"retain-margin"},"You must be logged in to access this page.")}))},He=a(535),Ze=a(527),et=a(537);function tt(){var e=Object(l.a)(["\n    mutation CREATE_SALE_MUTATION(\n        $saleItems: [SaleItemInput!]!,\n        $timestamp: Int!,\n        $customerId: String,\n        $discountType: SpecialSaleDeductionType,\n        $discountValue: String,\n        $taxType: SpecialSaleDeductionType,\n        $taxValue: String,\n        $shipping: String,\n        $note: String\n    ) {\n        createSaleAndItems(\n            saleItems: $saleItems,\n            timestamp: $timestamp,\n            customerId: $customerId,\n            discountType: $discountType,\n            discountValue: $discountValue,\n            taxType: $taxType,\n            taxValue: $taxValue,\n            shipping: $shipping,\n            note: $note\n        ) {\n            id\n            timestamp\n            customer {\n                id\n                name\n            }\n            saleItems {\n                id\n                quantity\n                product {\n                    id\n                    name\n                    salePrice\n                    costPrice\n                    categories\n                }\n                salePrice\n                costPrice\n            }\n            discountType\n            discountValue\n            taxType\n            taxValue\n            shipping\n            note\n            createdAt\n        }\n    }\n"]);return tt=function(){return e},e}var at=u()(tt()),nt=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState([{product:{id:null},salePrice:"0",quantity:1,timeAdded:ie.a.now()}]),l=Object(d.a)(i,2),o=l[0],s=l[1],u=r.a.useState(),p=Object(d.a)(u,2),f=p[0],E=p[1],b=r.a.useState(ie()().unix()),v=Object(d.a)(b,2),h=v[0],y=v[1],O=r.a.useState("FLAT"),I=Object(d.a)(O,2),P=I[0],T=I[1],k=r.a.useState(),$=Object(d.a)(k,2),F=$[0],A=$[1],q=r.a.useState("FLAT"),L=Object(d.a)(q,2),U=L[0],M=L[1],Q=r.a.useState(),V=Object(d.a)(Q,2),K=V[0],W=V[1],X=r.a.useState(),J=Object(d.a)(X,2),G=J[0],H=J[1],Z=r.a.useState(),ee=Object(d.a)(Z,2),te=ee[0],ae=ee[1],ne=r.a.useState(),re=Object(d.a)(ne,2),ce=re[0],le=re[1],oe=N.a.useForm(),se=Object(d.a)(oe,1)[0];r.a.useEffect((function(){le(de({saleItems:o,discountType:P,discountValue:F,taxType:U,taxValue:K,shipping:G}))}),[o,P,F,U,K,G]);var pe,fe=Object(m.a)(at,{variables:{saleItems:(pe=o,j()(pe).filter((function(e){return null!=e.product.id})).map((function(e){var t=Object(D.a)({},e);return delete t.timeAdded,t})).value()),customerId:f,timestamp:h,discountType:P,discountValue:F,taxType:U,taxValue:K,shipping:G,note:te},update:function(e,t){var a=e.readQuery({query:pt}),n=j.a.cloneDeep(a);n.salesByUser.push(t.data.createSaleAndItems),e.writeQuery({query:pt,data:n})}}),Ee=Object(d.a)(fe,2),ge=Ee[0],be=Ee[1].loading,ve=j.a.map(o,(function(e){return e.product.id})),he=Object(m.b)(Xe).data,Oe=he?he.customersByUser:null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Add a Sale Record",visible:n,onCancel:function(){return c(!1)},footer:null,className:"add-sale-modal"},r.a.createElement(N.a,{form:se,labelAlign:"left",onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.length>0&&null!==o[0].product.id)){e.next=5;break}return e.next=3,ge().then((function(){c(!1),se.resetFields(),E(void 0),s([{product:{id:null},salePrice:"0",quantity:1,timeAdded:ie.a.now()}]),T("FLAT"),A(void 0),M("FLAT"),W(void 0),w.b.success("Sale record added")})).catch((function(e){j.a.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error creating sale entry. Please contact SourceCodeXL.")}));case 3:e.next=6;break;case 5:w.b.error("Minimum of one product is required to record a sale");case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(N.a.Item,Object.assign({label:"Date of Sale"},rt,{rules:[{required:!0,message:"This field is required"}]}),r.a.createElement(He.a,{allowClear:!1,format:"DD-MM-YYYY",value:ie.a.unix(h),onChange:function(e){return y(ie()(e).unix())},style:{width:"190px"}})),r.a.createElement(N.a.Item,Object.assign({label:"Customer"},rt),r.a.createElement(_.a,{value:f,onChange:E,style:{width:"190px"}},j.a.map(Oe,(function(e){return r.a.createElement(_.a.Option,{key:e.id,value:e.id},e.name)})))),r.a.createElement(Ze.a,null),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{onClick:function(){var e=Object(Y.a)(o);e.push({product:{id:null},salePrice:"0",quantity:1,timeAdded:ie.a.now()}),s(e)},icon:r.a.createElement(z.a,null)},"Add Product")),r.a.createElement(R.a,{size:"small",pagination:!1,dataSource:o,rowKey:function(e){return"".concat(e.product.id,"-").concat(e.timeAdded)},columns:[{key:"Product",title:"Product",dataIndex:"id",render:function(t,a){return r.a.createElement(_.a,{style:{width:"100%",maxWidth:"190px"},value:a.product.id&&JSON.stringify(a.product),onChange:function(e){return function(e,t){var a=JSON.parse(t),n=Object(Y.a)(o),r=Object(D.a)({},e);r.product=a,r.salePrice=a.salePrice,r.costPrice=a.costPrice;var c=j.a.findIndex(n,e);n.splice(c,1,r),s(n)}(a,e)},placeholder:"Add a product"},j.a.map(e.products,(function(e){return r.a.createElement(_.a.Option,{value:JSON.stringify(e),disabled:j.a.includes(ve,e.id),key:e.id},e.name)})))}},{key:"Quantity",title:"Quantity",dataIndex:"quantity",render:function(e,t){return r.a.createElement(et.a,{value:e,min:1,onChange:function(e){return function(e,t){var a=Object(Y.a)(o),n=Object(D.a)({},e);n.quantity=t||1;var r=j.a.findIndex(a,e);a.splice(r,1,n),s(a)}(t,e)}})}},{key:"Price",title:"Price",dataIndex:"salePrice",render:function(e){return ye(e)},className:"no-700 align-right"},{key:"Cost",title:"Cost",dataIndex:"costPrice",render:function(e){return e?ye(e):0},className:"no-700 align-right"},{key:"Subtotal",title:"Subtotal",dataIndex:"product",render:function(e,t){return e.salePrice?t.quantity&&ye(parseFloat(Number(e.salePrice*t.quantity).toFixed(2))):0},className:"no-700 align-right"},{key:"Profit",title:"Profit",dataIndex:"product",render:function(e,t){return ye(ue([t]))},className:"no-700 align-right"},{key:"Remove",title:r.a.createElement("div",{className:"no-700"},"Remove"),dataIndex:"product",render:function(e,t){return r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){var e=Object(Y.a)(o);e=j.a.filter(e,(function(e){return e!==t})),s(e)},"aria-label":"delete",role:"img"},"\u274c")}}],summary:function(e){var t=Object(Y.a)(e),a=ue(t),n=me(t),c=0;return j.a.each(t,(function(e){return c+=e.quantity})),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{style:{padding:"8px"}},"Total"),r.a.createElement("th",{style:{padding:"16px"}},c),r.a.createElement("th",{style:{padding:"8px"},className:"no-700"}),r.a.createElement("th",{style:{padding:"8px"},className:"no-700"}),r.a.createElement("th",{style:{padding:"8px"},className:"no-700 align-right"},r.a.createElement("span",null,ye(parseFloat(Number(n).toFixed(2))))),r.a.createElement("th",{style:{padding:"8px"},className:"no-700 align-right"},r.a.createElement("span",null,ye(parseFloat(Number(a).toFixed(2))))),r.a.createElement("th",{style:{padding:"8px"}})))}}),r.a.createElement("span",null,"Discount:"),r.a.createElement("div",{className:"deduction-form-row"},r.a.createElement("div",{className:"deduction-type-col"},r.a.createElement(N.a.Item,null,r.a.createElement(_.a,{defaultValue:"FLAT",style:{width:"100%"},value:P,onChange:function(e){return T(e)}},r.a.createElement(_.a.Option,{value:"FLAT",key:"FLAT"},"FLAT"),r.a.createElement(_.a.Option,{value:"PERCENTAGE",key:"%"},"%")))),r.a.createElement("div",{className:"deduction-value-col"},r.a.createElement(N.a.Item,null,r.a.createElement(et.a,{value:F?parseFloat(F):0,onChange:function(e){var t=null;e&&(t=e.toString()),A(t)}})))),r.a.createElement("span",null,"Tax:"),r.a.createElement("div",{className:"deduction-form-row"},r.a.createElement("div",{className:"deduction-type-col"},r.a.createElement(N.a.Item,null,r.a.createElement(_.a,{defaultValue:"FLAT",style:{width:"100%"},value:U,onChange:function(e){return M(e)}},r.a.createElement(_.a.Option,{value:"FLAT",key:"FLAT"},"FLAT"),r.a.createElement(_.a.Option,{value:"PERCENTAGE",key:"%"},"%")))),r.a.createElement("div",{className:"deduction-value-col"},r.a.createElement(N.a.Item,null,r.a.createElement(et.a,{value:K?parseFloat(K):0,onChange:function(e){var t=null;e&&(t=e.toString()),W(t)}})))),r.a.createElement(N.a.Item,Object.assign({label:"Shipping",name:"shipping"},rt),r.a.createElement(et.a,{value:G?parseFloat(G):0,onChange:function(e){var t=null;e&&(t=e.toString()),H(t)}})),r.a.createElement(Ze.a,null),r.a.createElement("div",null,r.a.createElement("span",{className:"bold"},"TOTAL: ",ce&&ye(ce.toFixed(2)))),r.a.createElement(Ze.a,null),r.a.createElement(N.a.Item,Object.assign({label:"Notes",name:"notes"},rt),r.a.createElement(C.a,{value:te,onChange:function(e){return ae(e.target.value)}})),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:be,loading:be,style:{width:"100%"}},"Add",be?"ing":" "," Sale Record")))),r.a.createElement(g.a,{onClick:function(){return c(!0)},size:"large",icon:r.a.createElement(z.a,null),className:"add-button btn-add-margin-left"},r.a.createElement("span",{className:"no-550"},"Add Sale Record")))},rt={labelCol:{span:4},wrapperCol:{span:20}};function ct(){var e=Object(l.a)(["\n    mutation UPDATE_SALE_MUTATION(\n        $id: ID!,\n        $saleItems: [SaleItemInput!]!,\n        $timestamp: Int!,\n        $customerId: String,\n        $discountType: SpecialSaleDeductionType,\n        $discountValue: String,\n        $taxType: SpecialSaleDeductionType,\n        $taxValue: String,\n        $shipping: String,\n        $note: String\n    ) {\n        updateSaleAndItems(\n            id: $id,\n            saleItems: $saleItems,\n            timestamp: $timestamp,\n            customerId: $customerId,\n            discountType: $discountType,\n            discountValue: $discountValue,\n            taxType: $taxType,\n            taxValue: $taxValue,\n            shipping: $shipping,\n            note: $note\n        ) {\n            id\n            timestamp\n            customer {\n                id\n                name\n            }\n            saleItems {\n                quantity\n                product {\n                    id\n                    name\n                    salePrice\n                    costPrice\n                    categories\n                }\n                salePrice\n                costPrice\n            }\n            discountType\n            discountValue\n            taxType\n            taxValue\n            shipping\n            note\n            createdAt\n        }\n    }\n"]);return ct=function(){return e},e}var it=u()(ct()),lt=function(e){var t=e.sale.saleItems;I.each(t,(function(e){delete e.id,delete e.__typename}));var a=r.a.useState(),n=Object(d.a)(a,2),c=n[0],i=n[1],l=r.a.useState(t),o=Object(d.a)(l,2),s=o[0],u=o[1],p=r.a.useState(t),f=Object(d.a)(p,2),E=f[0],b=f[1],v=r.a.useState(e.sale.customer&&e.sale.customer.id),h=Object(d.a)(v,2),y=h[0],O=h[1],j=r.a.useState(e.sale.timestamp),P=Object(d.a)(j,2),T=P[0],k=P[1],$=r.a.useState(e.sale.discountType),F=Object(d.a)($,2),A=F[0],q=F[1],L=r.a.useState(e.sale.discountValue),U=Object(d.a)(L,2),M=U[0],Q=U[1],V=r.a.useState(e.sale.taxType),K=Object(d.a)(V,2),W=K[0],X=K[1],J=r.a.useState(e.sale.taxValue),G=Object(d.a)(J,2),H=G[0],Z=G[1],ee=r.a.useState(e.sale.shipping),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],re=r.a.useState(e.sale.note),ce=Object(d.a)(re,2),le=ce[0],oe=ce[1],se=r.a.useState(),pe=Object(d.a)(se,2),fe=pe[0],Ee=pe[1],ge=N.a.useForm(),be=Object(d.a)(ge,1)[0];r.a.useEffect((function(){Ee(de({saleItems:s,discountType:A,discountValue:M,taxType:W,taxValue:H,shipping:ae}))}),[s,A,M,W,H,ae]);var ve=Object(m.a)(it,{variables:{id:e.sale.id,saleItems:E,customerId:y,timestamp:T,discountType:A,discountValue:M,taxType:W,taxValue:H,shipping:ae,note:le},refetchQueries:[{query:pt}]}),he=Object(d.a)(ve,2),Oe=he[0],xe=he[1].loading,Se=I.map(s,(function(e){return e.product.id})),Ie=Object(m.b)(Xe).data,je=Ie?Ie.customersByUser:null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Update Sale Record",visible:c,onCancel:function(){return i(!1)},footer:null,className:"update-sale-modal"},r.a.createElement(N.a,{form:be,labelAlign:"left",onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.length>0&&null!==s[0].product.id)){e.next=5;break}return e.next=3,Oe().then((function(){i(!1),be.resetFields(),w.b.success("Sale record updated")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot update. Please contact SourceCodeXL.")}));case 3:e.next=6;break;case 5:w.b.error("Minimum of one product is required to record a sale");case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(N.a.Item,Object.assign({label:"Date of Sale"},rt,{rules:[{required:!0,message:"This field is required"}]}),r.a.createElement(He.a,{allowClear:!1,value:ie.a.unix(T),format:"DD-MM-YYYY",onChange:function(e){return k(ie()(e).unix())},style:{width:"190px"}})),r.a.createElement(N.a.Item,Object.assign({label:"Customer"},rt),r.a.createElement(_.a,{value:y||void 0,onChange:O,style:{width:"190px"}},I.map(je,(function(e){return r.a.createElement(_.a.Option,{key:e.id,value:e.id},e.name)})))),r.a.createElement(Ze.a,null),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{onClick:function(){var e=Object(Y.a)(s);e.push({product:{id:null},salePrice:"0",quantity:1}),u(e)},icon:r.a.createElement(z.a,null)},"Add Product")),r.a.createElement(R.a,{size:"small",pagination:!1,dataSource:s,rowKey:function(e){return"".concat(e.product.id,"-").concat(e.quantity)},columns:[{title:"Product",dataIndex:"id",render:function(t,a){return delete a.product.__typename,r.a.createElement(_.a,{style:{width:"100%",maxWidth:"180px"},value:a.product.id&&JSON.stringify(a.product),onChange:function(e){return function(e,t){var a=JSON.parse(t),n=Object(Y.a)(s),r=Object(D.a)({},e);r.product=a,r.salePrice=a.salePrice,r.costPrice=a.costPrice;var c=I.findIndex(n,e);n.splice(c,1,r),u(n);var i=I.filter(n,(function(e){return null!=e.product.id}));b(i)}(a,e)},placeholder:"Add a product"},I.map(e.products,(function(e){return r.a.createElement(_.a.Option,{value:JSON.stringify(e),disabled:I.includes(Se,e.id),key:e.id},e.name)})))}},{title:"Quantity",dataIndex:"quantity",render:function(e,t){return r.a.createElement(et.a,{value:e,min:1,onChange:function(e){return function(e,t){var a=Object(Y.a)(s),n=Object(D.a)({},e);n.quantity=t||1;var r=I.findIndex(a,e);a.splice(r,1,n),u(a);var c=I.filter(a,(function(e){return null!=e.product.id}));b(c)}(t,e)}})}},{title:"Price",dataIndex:"salePrice",render:function(e){return ye(e)},className:"no-700 align-right"},{title:"Cost",dataIndex:"costPrice",render:function(e){return ye(e)},className:"no-700 align-right"},{title:"Subtotal",dataIndex:"id",render:function(e,t){return t.salePrice&&t.quantity&&ye(parseFloat(Number(parseFloat(t.salePrice)*t.quantity).toFixed(2)))},className:"no-700 align-right"},{title:"Profit",dataIndex:"product",render:function(e,t){return ye(ue([t]))},className:"no-700 align-right"},{title:r.a.createElement("div",{className:"no-700"},"Remove"),dataIndex:"product",render:function(e,t){return r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){var e=Object(Y.a)(s);e=I.filter(e,(function(e){return e!==t})),u(e);var a=I.filter(e,(function(e){return null!=e.product.id}));b(a)},"aria-label":"delete",role:"img"},"\u274c")}}],summary:function(e){var t=Object(Y.a)(e),a=ue(t),n=me(t),c=0;return I.each(t,(function(e){return c+=e.quantity})),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{style:{padding:"8px"}},"Total"),r.a.createElement("th",{style:{padding:"16px"}},ye(c)),r.a.createElement("th",{style:{padding:"8px"},className:"no-700"}),r.a.createElement("th",{style:{padding:"8px"},className:"no-700"}),r.a.createElement("th",{style:{padding:"8px"},className:"no-700 align-right"},r.a.createElement("span",null,ye(n))),r.a.createElement("th",{style:{padding:"8px"},className:"no-700 align-right"},r.a.createElement("span",null,ye(a))),r.a.createElement("th",{style:{padding:"8px"}})))}}),r.a.createElement("span",null,"Discount:"),r.a.createElement("div",{className:"deduction-form-row"},r.a.createElement("div",{className:"deduction-type-col"},r.a.createElement(N.a.Item,null,r.a.createElement(_.a,{defaultValue:"FLAT",style:{width:"100%"},value:A,onChange:function(e){return q(e)}},r.a.createElement(_.a.Option,{value:"FLAT",key:"FLAT"},"FLAT"),r.a.createElement(_.a.Option,{value:"PERCENTAGE",key:"%"},"%")))),r.a.createElement("div",{className:"deduction-value-col"},r.a.createElement(N.a.Item,null,r.a.createElement(et.a,{value:M?parseFloat(M):0,onChange:function(e){var t=null;e&&(t=e.toString()),Q(t)}})))),r.a.createElement("span",null,"Tax:"),r.a.createElement("div",{className:"deduction-form-row"},r.a.createElement("div",{className:"deduction-type-col"},r.a.createElement(N.a.Item,null,r.a.createElement(_.a,{defaultValue:"FLAT",style:{width:"100%"},value:W,onChange:function(e){return X(e)}},r.a.createElement(_.a.Option,{value:"FLAT",key:"FLAT"},"FLAT"),r.a.createElement(_.a.Option,{value:"PERCENTAGE",key:"%"},"%")))),r.a.createElement("div",{className:"deduction-value-col"},r.a.createElement(N.a.Item,null,r.a.createElement(et.a,{value:H?parseFloat(H):0,onChange:function(e){var t=null;e&&(t=e.toString()),Z(t)}})))),r.a.createElement(N.a.Item,Object.assign({label:"Shipping"},rt),r.a.createElement(et.a,{value:ae?parseFloat(ae):0,onChange:function(e){var t=null;e&&(t=e.toString()),ne(t)}})),r.a.createElement(Ze.a,null),r.a.createElement("div",null,r.a.createElement("span",{className:"bold"},"TOTAL: ",fe&&ye(fe.toFixed(2)))),r.a.createElement(Ze.a,null),r.a.createElement(N.a.Item,Object.assign({label:"Notes"},rt),r.a.createElement(C.a,{value:le,onChange:function(e){return oe(e.target.value)}})),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:xe,loading:xe,style:{width:"100%"}},"Updat",xe?"ing":"e "," Sale Record")))),r.a.createElement(g.a,{onClick:function(){return i(!0)}},r.a.createElement("span",{"aria-label":"edit",role:"img"},"\u270f\ufe0f")))},ot=function(e){var t;return n.createElement("div",{key:e.sale.id},n.createElement("div",{className:"bring-900"},n.createElement("p",null,n.createElement(lt,{sale:e.sale,products:e.products}),n.createElement(ae,{className:"btn-add-margin-left",onClick:function(){return e.setIdForDeletion(e.sale.id)},onDelete:e.onDelete}))),n.createElement("div",{className:"bold"},n.createElement("p",null,"SALE DETAILS:")),e.sale&&n.createElement(n.Fragment,null,n.createElement(R.a,{className:"no-550",size:"small",pagination:!1,dataSource:e.sale.saleItems,rowKey:function(e){return"".concat(e.product.id,"-").concat(e.quantity)},columns:[{title:"Product",dataIndex:"id",render:function(e,t){return t.product.name}},{title:"Quantity",dataIndex:"quantity",render:function(e){return ye(e)}},{title:n.createElement("div",{className:"align-right"},"Price"),dataIndex:"salePrice",render:function(e){return ye(e)},className:"align-right"},{title:n.createElement("div",{className:"align-right"},"Cost"),dataIndex:"costPrice",render:function(e){return ye(e)},className:"align-right"},{title:n.createElement("div",{className:"align-right"},"Subtotal"),dataIndex:"id",render:function(e,t){return ye(me([t]))},className:"align-right"},{title:n.createElement("div",{className:"align-right"},"Profit"),dataIndex:"product",render:function(e,t){return ye(ue([t]))},className:"align-right"}],summary:function(e){var t=Object(Y.a)(e),a=ue(t),r=me(t),c=0;return I.each(t,(function(e){c+=e.quantity})),n.createElement(n.Fragment,null,n.createElement("tr",null,n.createElement("th",{style:{padding:"8px"}},"Total"),n.createElement("th",{style:{padding:"8px"}},ye(c)),n.createElement("th",{style:{padding:"8px"}}),n.createElement("th",{style:{padding:"8px"}}),n.createElement("th",{style:{padding:"8px"},className:"align-right"},ye(r)),n.createElement("th",{style:{padding:"8px"},className:"align-right"},ye(a))))}}),n.createElement("div",{className:"bring-550"},I.map(e.sale.saleItems,(function(e){return n.createElement("div",{className:"sale-details-product-mobile",key:"".concat(e.product.id,"-").concat(e.quantity)},n.createElement("b",null,e.product.name),n.createElement("div",{className:"summary-row"},n.createElement("span",null,"Quantity:")," ",n.createElement("span",null,ye(e.quantity))),n.createElement("div",{className:"summary-row"},n.createElement("span",{className:"align-right"},"Price:")," ",n.createElement("span",null,ye(e.salePrice))),n.createElement("div",{className:"summary-row"},n.createElement("span",{className:"align-right"},"Cost:")," ",n.createElement("span",null,ye(e.costPrice))),n.createElement("div",{className:"summary-row"},n.createElement("span",{className:"align-right"},"Subtotal:")," ",n.createElement("span",null,ye(me([e])))),n.createElement("div",{className:"summary-row"},n.createElement("span",{className:"align-right"},"Profit:")," ",n.createElement("span",null,ye(ue([e])))),n.createElement(Ze.a,null))}))),n.createElement("div",null,n.createElement("div",{className:"summary-row"},n.createElement("span",null,"SUBTOTAL:")," ",n.createElement("span",null,ye(me(e.sale.saleItems)))),n.createElement("div",{className:"summary-row"},n.createElement("span",null,"DISCOUNT:")," ",n.createElement("span",null,e.sale.discountType&&e.sale.discountValue?"FLAT"===e.sale.discountType?e.sale.discountValue:"".concat(e.sale.discountValue," %"):null)),n.createElement("div",{className:"summary-row"},n.createElement("span",null,"TAX:")," ",n.createElement("span",null,e.sale.taxType&&e.sale.taxValue?"FLAT"===e.sale.taxType?e.sale.taxValue:"".concat(e.sale.taxValue," %"):null)),n.createElement("div",{className:"summary-row"},n.createElement("span",null,"SHIPPING:")," ",n.createElement("span",null,e.sale.shipping)),n.createElement("div",{className:"summary-row bold",style:{marginTop:".5em"}},n.createElement("span",null,"TOTAL:")," ",n.createElement("span",null,ye(de(e.sale))))),n.createElement(Ze.a,null),n.createElement("div",null,n.createElement("div",{className:"summary-row-last"},n.createElement("span",null,"SUB-PROFIT:")," ",n.createElement("span",null,ye(ue(e.sale.saleItems))),n.createElement("span",null,"(products prices minus costs)")),n.createElement("div",{className:"summary-row-last",style:{marginTop:".5em"}},n.createElement("span",null,"PROFIT:")," ",n.createElement("span",null,ye(se(e.sale))),n.createElement("span",null,"(minus discount)"))),n.createElement("div",{className:"bring-550"},n.createElement(Ze.a,null),n.createElement("div",null,"CUSTOMER: ",null===(t=e.sale.customer)||void 0===t?void 0:t.name)),n.createElement(Ze.a,null),n.createElement("div",null,"NOTE: ",e.sale.note)))};function st(){var e=Object(l.a)(["\n    mutation DELETE_SALE_AND_ITEMS_MUTATION($id: ID!) {\n        deleteSaleAndItems(id: $id) {\n            id\n            createdAt\n        }\n    }\n"]);return st=function(){return e},e}function ut(){var e=Object(l.a)(["\n    {\n        salesByUser(orderBy: timestamp_DESC) {\n            id\n            timestamp\n            customer {\n                id\n                name\n            }\n            saleItems {\n                quantity\n                product {\n                    id\n                    name\n                    salePrice\n                    costPrice\n                    categories\n                }\n                salePrice\n                costPrice\n            }\n            discountType\n            discountValue\n            taxType\n            taxValue\n            shipping\n            note\n            createdAt\n        }\n    }\n"]);return ut=function(){return e},e}function mt(){var e=Object(l.a)(["\n    {\n        productsByUser {\n            id\n            name\n            salePrice\n            costPrice\n            categories\n        }\n    }\n"]);return mt=function(){return e},e}var dt=u()(mt()),pt=u()(ut()),ft=u()(st()),Et=function(){var e,t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=Object(m.b)(pt,{fetchPolicy:"network-only"}),l=i.data,o=i.loading;e=l?I.sortBy(l.salesByUser,"timestamp").reverse():null;var s=Object(m.a)(ft,{variables:{id:n},update:function(e,t){var a=e.readQuery({query:pt}),n=I.filter(a.salesByUser,(function(e){return e.id!==t.data.deleteSaleAndItems.id}));e.writeQuery({query:pt,data:{salesByUser:n}})}}),u=Object(d.a)(s,1)[0],p=Object(m.b)(dt).data,f=p?p.productsByUser:[];I.each(f,(function(e){delete e.__typename}));var E=function(){var e=Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.b.info("Please wait..."),e.next=3,u().then((function(){w.b.success("Sale record deleted")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot delete. Please contact SourceCodeXL.")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ea.Consumer,null,(function(t){return t?t&&!t.verified?r.a.createElement("p",{className:"retain-margin"},"Your email must be verified to access this page."):r.a.createElement(r.a.Fragment,null,r.a.createElement(nt,{products:f}),r.a.createElement("div",{id:"section-to-print"},r.a.createElement(R.a,{bordered:!0,loading:o,dataSource:e,rowKey:"id",className:"sales-table",rowClassName:"sales-table-row",expandable:{expandedRowRender:function(e){return r.a.createElement(ot,{sale:e,products:f,setIdForDeletion:c,onDelete:E})},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(M.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide"}):r.a.createElement(Q.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide"})}},pagination:re,columns:[Object(D.a)({title:"Date",dataIndex:"timestamp",render:function(e){return ie.a.unix(e).format("DD MMMM YYYY")},sorter:function(e,t){return ve(e,t,"timestamp")}},he("timestamp")),Object(D.a)({title:"Products",dataIndex:"saleItems",render:function(e){return I.map(e,(function(e){var t=e.product.name.length>22?e.product.name.substring(0,22).concat("..."):e.product.name;return r.a.createElement(U.a,{key:e.product.name},t)}))}},he("saleItems")),Object(D.a)({title:"Subtotal",dataIndex:"saleItems",render:function(e){var t=me(e);return r.a.createElement("p",{className:"align-right"},ye(t))},sorter:function(e,t){return me(e.saleItems)-me(t.saleItems)}},he("subtotal"),{className:"no-1300"}),Object(D.a)({title:"Total",dataIndex:"id",render:function(e,t){var a=de(t);return r.a.createElement("p",{className:"align-right"},ye(a))},sorter:function(e,t){return de(e)-de(t)}},he("total"),{className:"no-900"}),Object(D.a)({title:"Profit",dataIndex:"saleItems",render:function(e,t){var a=se(t);return r.a.createElement("p",{className:"align-right"},ye(a))},sorter:function(e,t){return se(e)-se(t)}},he("profit"),{className:"no-1300"}),Object(D.a)({title:"Customer",dataIndex:"customer",render:function(e){return e?e.name:null},sorter:function(e,t){return ve(e,t,"customer")}},he("customer"),{className:"no-1300"}),{title:r.a.createElement("div",{className:"section-to-hide"},"Edit"),dataIndex:"id",key:"edit",render:function(e,t){return r.a.createElement("div",{className:"section-to-hide"},r.a.createElement(lt,{sale:t,products:f}))},className:"no-900"},{title:r.a.createElement("div",{className:"section-to-hide"},"Delete"),dataIndex:"id",key:"edit",render:function(e){return r.a.createElement("div",{className:"section-to-hide"},r.a.createElement(ae,{onClick:function(){return c(e)},onDelete:E}))},className:"no-900"}],summary:function(e){var t=0,a=0,n=0;return I.each(e,(function(e){var r=me(e.saleItems);t+=r;var c=de(e);a+=c;var i=se(e);n+=i})),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{style:{padding:"8px"},className:"no-900"},"Total"),r.a.createElement("th",{style:{padding:"8px"},className:"no-900 section-to-hide"}),r.a.createElement("th",{style:{padding:"8px"},className:"no-900"}),r.a.createElement("th",{style:{padding:"8px"},className:"no-1300 align-right"},ye(t.toFixed(2))),r.a.createElement("th",{style:{padding:"8px"},className:"no-900 align-right"},ye(a.toFixed(2))),r.a.createElement("th",{style:{padding:"8px"},className:"no-1300 align-right"},ye(n.toFixed(2))),r.a.createElement("th",{style:{padding:"8px"},className:"no-1300"}),r.a.createElement("th",{className:"no-900"}),r.a.createElement("th",{className:"no-900"})))}}))):r.a.createElement("p",{className:"retain-margin"},"You must be logged in to access this page.")}))};function gt(){var e=Object(l.a)(["\nmutation CREATE_EXPENSE_MUTATION(\n    $name: String!\n    $description: String\n    $cost: String!\n    $timestamp: Int!\n) {\n    createExpense(\n        name: $name\n        description: $description\n        cost: $cost\n        timestamp: $timestamp\n    ) {\n        id\n        name\n        description\n        cost\n        timestamp\n        createdAt\n    }\n}\n"]);return gt=function(){return e},e}var bt=u()(gt()),vt=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),i=Object(d.a)(c,2),l=i[0],o=i[1],s=r.a.useState(),u=Object(d.a)(s,2),p=u[0],f=u[1],E=r.a.useState(ie()().unix()),b=Object(d.a)(E,2),v=b[0],h=b[1],y=r.a.useState(!1),O=Object(d.a)(y,2),j=O[0],P=O[1],T=N.a.useForm(),k=Object(d.a)(T,1)[0],$=Object(m.a)(bt,{variables:{name:a,description:l,cost:p,timestamp:v},update:function(e,t){var a=t.data.createExpense,n=e.readQuery({query:It});n={expensesByUser:I.sortBy([].concat(Object(Y.a)(n.expensesByUser),[a]),"createdAt").reverse()},e.writeQuery({query:It,data:n})}}),F=Object(d.a)($,2),A=F[0],q=F[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Add an Expense",visible:j,onCancel:function(){return P(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{form:k,onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().then((function(){P(!1),k.resetFields(),w.b.success("Expense added")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 2:case"end":return e.stop()}}),e)})))}),r.a.createElement(N.a.Item,Object.assign({label:"Date"},X,{rules:[{required:!0,message:"This field is required"}]}),r.a.createElement(He.a,{allowClear:!1,format:"DD-MM-YYYY",value:ie.a.unix(v),onChange:function(e){return h(ie()(e).unix())},style:{width:"190px"}})),r.a.createElement(N.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"This field is required"}]},r.a.createElement(C.a,{value:a,onChange:function(e){return n(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Description",name:"description"},r.a.createElement(C.a,{value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Cost",name:"cost",rules:[{required:!0,message:"This field is required"}]},r.a.createElement(et.a,{value:p?parseFloat(p):0,onChange:function(e){e&&f(e.toString())}})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",loading:q,style:{width:"100%"}},"Add",q?"ing ":" "," Expense")))),r.a.createElement(g.a,{onClick:function(){return P(!0)},size:"large",icon:r.a.createElement(z.a,null),className:"add-button btn-add-margin-left"},r.a.createElement("span",{className:"no-550"},"Add Expense")))};function ht(){var e=Object(l.a)(["\n    mutation UPDATE_EXPENSE_MUTATION(\n        $id: ID!\n        $name: String\n        $description: String\n        $cost: String\n        $timestamp: Int!\n    ) {\n      updateExpense(\n            id: $id\n            name: $name\n            description: $description\n            cost: $cost\n            timestamp: $timestamp\n        ) {\n            id\n            name\n            description\n            cost\n            timestamp\n        }\n    }\n"]);return ht=function(){return e},e}var yt=u()(ht()),Ot=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=r.a.useState(),l=Object(d.a)(i,2),o=l[0],s=l[1],u=r.a.useState(),p=Object(d.a)(u,2),f=p[0],E=p[1],b=r.a.useState(e.expense.timestamp),v=Object(d.a)(b,2),h=v[0],y=v[1],O=r.a.useState(!1),j=Object(d.a)(O,2),P=j[0],T=j[1],k=Object(m.a)(yt,{variables:{id:e.expense.id,name:n,description:o,cost:f,timestamp:h},refetchQueries:[{query:It}]}),$=Object(d.a)(k,2),F=$[0],A=$[1].loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{title:"Update Expense",visible:P,onCancel:function(){return T(!1)},footer:null},r.a.createElement(N.a,Object.assign({},X,{initialValues:{name:e.expense.name,description:e.expense.description,cost:parseFloat(e.expense.cost)},onFinish:function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F().then((function(){w.b.success("Expense updated"),T(!1)})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot update. Please contact SourceCodeXL.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(N.a.Item,Object.assign({label:"Date"},X),r.a.createElement(He.a,{allowClear:!1,format:"DD-MM-YYYY",value:ie.a.unix(h),onChange:function(e){return y(ie()(e).unix())},style:{width:"190px"}})),r.a.createElement(N.a.Item,{label:"Name",name:"name"},r.a.createElement(C.a,{onChange:function(e){return c(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Description",name:"description"},r.a.createElement(C.a,{onChange:function(e){return s(e.target.value)}})),r.a.createElement(N.a.Item,{label:"Cost",name:"cost"},r.a.createElement(et.a,{onChange:function(e){return e&&E(e.toString())}})),r.a.createElement(N.a.Item,J,r.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:A,loading:A,style:{width:"100%"}},"Updat",A?"ing":"e"," Expense")))),r.a.createElement(g.a,{onClick:function(){return T(!0)}},r.a.createElement("span",{"aria-label":"edit",role:"img"},"\u270f\ufe0f")))};function xt(){var e=Object(l.a)(["\n    mutation DELETE_EXPENSE_MUTATION($id: ID!) {\n        deleteExpense(id: $id) {\n            id\n            name\n            description\n            cost\n            timestamp\n            createdAt\n        }\n    }\n"]);return xt=function(){return e},e}function St(){var e=Object(l.a)(["\n    {\n        expensesByUser(orderBy: timestamp_DESC) {\n            id\n            name\n            description\n            cost\n            timestamp\n            createdAt\n        }\n    }\n"]);return St=function(){return e},e}var It=u()(St()),jt=u()(xt()),Nt=ne((function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],i=Object(m.b)(It),l=i.data,o=i.loading,s=l?l.expensesByUser:null,u=Object(m.a)(jt,{variables:{id:n},update:function(e,t){var a=e.readQuery({query:It}),n=I.filter(a.expensesByUser,(function(e){return e.id!==t.data.deleteExpense.id}));e.writeQuery({query:It,data:{expensesByUser:n}})}}),p=Object(d.a)(u,1)[0],f=function(e){var t=e.expense,a=t.name,n=t.description,c=t.cost;return r.a.createElement("div",{className:"expense-detail-mobile bring-750"},r.a.createElement("div",{className:"bring-550"},r.a.createElement("p",null,r.a.createElement(Ot,{expense:e.expense}),r.a.createElement(ae,{className:"btn-add-margin-left",onClick:function(){return e.setIdForDeletion(e.expense.id)},onDelete:E}))),r.a.createElement("div",null,r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Name:")," ",r.a.createElement("span",null,a)),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Description:")," ",r.a.createElement("span",null,n)),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Cost:")," ",r.a.createElement("span",null,c))))},E=r.a.useCallback(Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.b.info("Please wait..."),e.next=3,p().then((function(){w.b.success("Expense deleted")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)})),w.b.error("Error: cannot delete. Please contact SourceCodeXL.")}));case 3:case"end":return e.stop()}}),e)}))),[p]),g=r.a.useMemo((function(){return e.windowWidth>=751?void 0:{expandedRowRender:function(e){return r.a.createElement(f,{expense:e,setIdForDeletion:c,onDelete:E})},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(M.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-750"}):r.a.createElement(Q.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-750"})}}}),[e.windowWidth,E]);return r.a.createElement(ea.Consumer,null,(function(e){return e?e&&!e.verified?r.a.createElement("p",{className:"retain-margin"},"Your email must be verified to access this page."):r.a.createElement(r.a.Fragment,null,r.a.createElement(vt,null),r.a.createElement(R.a,{bordered:!0,loading:o,dataSource:s,rowKey:"id",expandable:g,pagination:re,columns:[Object(D.a)({title:"Date",dataIndex:"timestamp",render:function(e){return ie.a.unix(e).format("DD MMMM YYYY")},sorter:function(e,t){return ve(e,t,"timestamp")}},he("timestamp")),Object(D.a)({title:"Name",dataIndex:"name",sorter:function(e,t){return ve(e,t,"name")}},he("name")),Object(D.a)({title:"Description",dataIndex:"description",sorter:function(e,t){return ve(e,t,"description")}},he("description"),{className:"no-750"}),Object(D.a)({title:"Cost",dataIndex:"cost",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e))},sorter:function(e,t){return ve(e,t,"cost")}},he("cost")),{title:"Edit",dataIndex:"id",key:"edit",render:function(e,t){return r.a.createElement(Ot,{expense:t})},className:"no-550"},{title:"Delete ",dataIndex:"id",key:"edit",render:function(e){return r.a.createElement(ae,{onClick:function(){return c(e)},onDelete:E})},className:"no-550"}],summary:function(e){var t=0;return I.each(e,(function(e){return t+=parseFloat(e.cost)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{style:{padding:"8px"}},"Total"),r.a.createElement("th",{style:{padding:"8px"}}),r.a.createElement("th",{style:{padding:"8px"}}),r.a.createElement("th",{style:{padding:"8px"},className:"align-right"},ye(t.toFixed(2))),r.a.createElement("th",{className:"no-550"}),r.a.createElement("th",{className:"no-550"})))}})):r.a.createElement("p",{className:"retain-margin"},"You must be logged in to access this page.")}))})),wt=a(165),Ct=a(91),Pt=a(536),Tt=a(528),kt=a(529),$t=a(533),Ft=a(351),At=a(352),qt=a(193),Lt=a(186),Dt=a(362),Ut=ne((function(e){var t=Object(m.b)(pt).data,a=t?t.salesByUser:null,n=Object(m.b)(It).data,c=n?n.expensesByUser:null,i=r.a.useState(ie()().startOf("year")),l=Object(d.a)(i,2),o=l[0],s=l[1],u=r.a.useState(ie()().endOf("month")),p=Object(d.a)(u,2),f=p[0],E=p[1],g=r.a.useMemo((function(){return e.windowWidth>=656?void 0:{expandedRowRender:function(e){return r.a.createElement(b,{rowData:e})},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(M.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-655"}):r.a.createElement(Q.a,{onClick:function(e){return a(n,e)},style:{fontSize:"18pt"},className:"section-to-hide bring-655"})}}}),[e.windowWidth]),b=function(e){var t=e.rowData,a=t.transactions,n=t.units;return r.a.createElement("div",{className:"top-customer-detail-mobile"},r.a.createElement("div",null,r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Transactions:")," ",r.a.createElement("span",null,ye(a))),r.a.createElement("div",{className:"summary-row"},r.a.createElement("span",null,"Units Bought:")," ",r.a.createElement("span",null,ye(n)))))};return r.a.createElement("div",{className:"reports-wrapper"},r.a.createElement(ea.Consumer,null,(function(e){if(!e)return r.a.createElement("p",null,"You must be logged in to access this page.");if(e&&!e.verified)return r.a.createElement("p",null,"Your email must be verified to access this page.");var t=o.unix(),n=f.unix(),i=pe(a,t,n),l=fe(c,t,n),u=ge(a,c,o,f),m=function(e,t,a,n){var r,c=I.filter(e,(function(e){return e.timestamp>=t&&e.timestamp<=a})),i=[],l=Object(oe.a)(c);try{for(l.s();!(r=l.n()).done;){var o=r.value;i=[].concat(Object(Y.a)(i),Object(Y.a)(o.saleItems))}}catch(d){l.e(d)}finally{l.f()}var s=I.groupBy(i,(function(e){return e.product.id})),u=[];I.forEach(s,(function(e,t){var a={product:null,quantitySold:0,revenue:0},n=s[t];a.product=n[0].product;var r=0,c=0;I.forEach(n,(function(e){r+=e.quantity;var t=e.quantity*e.salePrice;c+=+t.toFixed(2)})),a.quantitySold=r,a.revenue=c,u.push(a)}));var m=I.orderBy(u,"revenue","desc");return n?I.slice(m,0,n):m}(a,t,n,10),d=function(e,t,a,n){var r,c=I.filter(e,(function(e){return e.timestamp>=t&&e.timestamp<=a})),i=[],l=Object(oe.a)(c);try{for(l.s();!(r=l.n()).done;){var o=r.value;i=[].concat(Object(Y.a)(i),Object(Y.a)(o.saleItems))}}catch(h){l.e(h)}finally{l.f()}for(var s={},u=0,m=i;u<m.length;u++){var d,p=m[u],f=p.product.categories,E=Object(oe.a)(f);try{var g=function(){var e=d.value;I.find(s,(function(t,a){return a===e}))?s[e].push(p):s[e]=[p]};for(E.s();!(d=E.n()).done;)g()}catch(h){E.e(h)}finally{E.f()}}var b=[];I.forEach(s,(function(e,t){var a={category:t,quantitySold:0,revenue:0},n=s[t],r=0,c=0;I.forEach(n,(function(e){r+=e.quantity;var t=e.quantity*e.salePrice;c+=+t.toFixed(2)})),a.quantitySold=r,a.revenue=c,b.push(a)}));var v=I.orderBy(b,"revenue","desc");return n?I.slice(v,0,n):v}(a,t,n,10),p=be(a,t,n,10);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"date-range-container"},r.a.createElement("div",{className:"datepicker-container"},r.a.createElement(He.a,{format:"DD MMMM YYYY",value:o,onChange:function(e){var t=e||ie()();s(t)}})),r.a.createElement("span",{className:"date-range-dash"},"-"),r.a.createElement("div",{className:"datepicker-container"},r.a.createElement(He.a,{format:"DD MMMM YYYY",value:f,onChange:function(e){var t=e||ie()();E(t)}}))),r.a.createElement("div",{className:"reports-cards-container bold totals-grid-container"},r.a.createElement(wt.a,{gutter:16},r.a.createElement(Ct.a,{span:6,className:"reports-cards-col"},r.a.createElement(Pt.a,null,r.a.createElement("label",{className:"reports-card-label"},"Total Revenue"),r.a.createElement("div",{className:"reports-card-value"},ye(i.toFixed(2))))),r.a.createElement(Ct.a,{span:6,className:"reports-cards-col"},r.a.createElement(Pt.a,null,r.a.createElement("label",{className:"reports-card-label"},"Total Expense"),r.a.createElement("div",{className:"reports-card-value"},ye(l.toFixed(2))))),r.a.createElement(Ct.a,{span:6,className:"reports-cards-col"},r.a.createElement(Pt.a,null,r.a.createElement("label",{className:"reports-card-label"},"Total Profit"),r.a.createElement("div",{className:"reports-card-value"},ye((i-l).toFixed(2))))),r.a.createElement(Ct.a,{span:6,className:"reports-cards-col"},r.a.createElement(Pt.a,null,r.a.createElement("label",{className:"reports-card-label"},"Units Sold"),r.a.createElement("div",{className:"reports-card-value"},ye(Ee(a,t,n))))))),r.a.createElement("div",{className:"reports-cards-container"},r.a.createElement(Pt.a,{className:"profit-expense-card",bordered:!1},r.a.createElement("div",{className:"profit-expenses-chart-container"},r.a.createElement(Tt.a,{width:"100%",height:"100%"},r.a.createElement(kt.a,{width:500,height:300,data:u,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement($t.a,{strokeDasharray:"3 3"}),r.a.createElement(Ft.a,{dataKey:"dateName"}),r.a.createElement(At.a,null),r.a.createElement(qt.a,null),r.a.createElement(Lt.a,null),r.a.createElement(Dt.a,{dataKey:"profit",fill:"#82ca9d"}),r.a.createElement(Dt.a,{dataKey:"expenses",fill:"#CA82AF"})))))),r.a.createElement("div",{className:"reports-cards-container"},r.a.createElement(Pt.a,{className:"top-products-card",bordered:!1},r.a.createElement("h2",{className:"report-table-title"},"Top Selling Products"),r.a.createElement(R.a,{bordered:!0,dataSource:m,rowKey:function(e){return"".concat(e.product.id)},pagination:!1,columns:[{title:"Product Name",dataIndex:["product","name"],sorter:function(e,t){return ve(e.product,t.product,"name")}},{title:"Categories",dataIndex:["product","categories"],render:function(e){return I.map(e,(function(e){return r.a.createElement(U.a,{key:e},e)}))},className:"no-800"},{title:"Sold",dataIndex:"quantitySold",render:function(e){return"x ".concat(ye(e))},sorter:function(e,t){return ve(e,t,"quantitySold")}},{title:"Revenue",dataIndex:"revenue",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e.toFixed(2)))},sorter:function(e,t){return ve(e,t,"revenue")}}]}))),r.a.createElement("div",{className:"reports-cards-container"},r.a.createElement(Pt.a,{className:"top-categories-card",bordered:!1},r.a.createElement("h2",{className:"report-table-title"},"Top Selling Categories"),r.a.createElement(R.a,{bordered:!0,dataSource:d,rowKey:"category",pagination:!1,columns:[{title:"Category",dataIndex:"category",sorter:function(e,t){return ve(e,t,"category")}},{title:"Sold Products",dataIndex:"quantitySold",render:function(e){return"x ".concat(ye(e))},sorter:function(e,t){return ve(e,t,"quantitySold")}},{title:"Revenue",dataIndex:"revenue",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e.toFixed(2)))},sorter:function(e,t){return ve(e,t,"revenue")}}]}))),r.a.createElement("div",{className:"reports-cards-container"},r.a.createElement(Pt.a,{className:"top-customers-card",bordered:!1},r.a.createElement("h2",{className:"report-table-title"},"Top Customers"),r.a.createElement(R.a,{bordered:!0,dataSource:p,rowKey:function(e){return"".concat(e.customer.id)},pagination:!1,expandable:g,columns:[{title:"Customer",dataIndex:["customer","name"],sorter:function(e,t){return ve(e,t,"customer")}},{title:"Tran sactions",dataIndex:"transactions",sorter:function(e,t){return ve(e,t,"transactions")},className:"no-655"},{title:"Units Bought",dataIndex:"units",render:function(e){return"x ".concat(ye(e))},sorter:function(e,t){return ve(e,t,"units")},className:"no-655"},{title:"Revenue",dataIndex:"revenue",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e.toFixed(2)))},sorter:function(e,t){return ve(e,t,"revenue")}},{title:"Profit",dataIndex:"profit",render:function(e){return r.a.createElement("p",{className:"align-right"},ye(e.toFixed(2)))},sorter:function(e,t){return ve(e,t,"profit")}}]}))))})))}));function Rt(){var e=Object(l.a)(["\n  mutation REQUEST_RESET_MUTATION($email: String!) {\n    requestReset(email: $email) {\n        id\n    }\n  }\n"]);return Rt=function(){return e},e}var Mt=u()(Rt()),Qt=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),i=Object(d.a)(c,2),l=i[0],o=i[1],s=Object(m.a)(Mt,{variables:{email:a},refetchQueries:[{query:Ht}]}),u=Object(d.a)(s,2),p=u[0],f=u[1].loading;return r.a.createElement("div",{className:"retain-margin"},l?r.a.createElement("p",null,l):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Request a password reset"),r.a.createElement(N.a,{initialValues:{remember:!0},onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().then((function(){o("Successfully sent! Please check your email for a reset link - THIS LINK WILL EXPIRE IN ONE HOUR.")})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(N.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email"}]},r.a.createElement(C.a,{prefix:r.a.createElement(P.a,{className:"site-form-item-icon"}),placeholder:"E-mail",onChange:function(e){return n(e.target.value)}})),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{disabled:f,loading:f,type:"primary",htmlType:"submit",className:"login-form-button"},f?"Sending request":"Reset")))))};function Yt(){var e=Object(l.a)(["\n  mutation RESET_MUTATION($resetToken: String!, $password: String!, $confirmPassword: String!) {\n    resetPassword(resetToken: $resetToken, password: $password, confirmPassword: $confirmPassword) {\n        id\n        email\n        name\n    }\n  }\n"]);return Yt=function(){return e},e}var Bt=u()(Yt()),_t=function(e){var t=Object(o.f)(),a=r.a.useState(),n=Object(d.a)(a,2),c=n[0],i=n[1],l=r.a.useState(),s=Object(d.a)(l,2),u=s[0],p=s[1],f=r.a.useState(),E=Object(d.a)(f,2),b=E[0],v=E[1],h=new URLSearchParams(e.location.search).get("resetToken");h||t.push("/requestResetPassword");var y=Object(m.a)(Bt,{variables:{resetToken:h,password:c,confirmPassword:u},refetchQueries:[{query:Ht}]}),O=Object(d.a)(y,2),j=O[0],P=O[1].loading;return r.a.createElement(r.a.Fragment,null,b?r.a.createElement("p",null,b):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Enter your new password:"),r.a.createElement(N.a,{initialValues:{remember:!0},onFinish:Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c===u){e.next=4;break}w.b.error("Passwords did not match"),e.next=6;break;case 4:return e.next=6,j().then((function(){v("Password successfully changed! Redirecting..."),setTimeout((function(){t.push("/")}),3e3)})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(N.a.Item,{name:"newPassword",rules:[{required:!0,message:"Please input your new password"}]},r.a.createElement(C.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),type:"password",placeholder:"New Password",onChange:function(e){return i(e.target.value)}})),r.a.createElement(N.a.Item,{name:"confirmPassword",rules:[{required:!0,message:"Please confirm your new password"}]},r.a.createElement(C.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Confirm New Password",onChange:function(e){return p(e.target.value)}})),r.a.createElement(N.a.Item,null,r.a.createElement(g.a,{disabled:P,loading:P,type:"primary",htmlType:"submit",className:"login-form-button"},P?"Processing":"Reset")))))};function Vt(){var e=Object(l.a)(["\n  mutation CONFIRM_MUTATION($confirmEmailToken: String!) {\n    confirmEmail(confirmEmailToken: $confirmEmailToken) {\n        id\n        email\n        name\n    }\n  }\n"]);return Vt=function(){return e},e}var zt=u()(Vt()),Kt=function(e){var t=Object(o.f)(),a=new URLSearchParams(e.location.search).get("confirmEmailToken"),n=r.a.useState("Confirming email, please wait..."),c=Object(d.a)(n,2),i=c[0],l=c[1],s=Object(m.a)(zt,{variables:{confirmEmailToken:a},refetchQueries:[{query:Ht}]}),u=Object(d.a)(s,1)[0];return r.a.useEffect((function(){(function(){var e=Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}l("Confirmation token not found! Please make sure to navigate to this page by clicking on the link that was sent to your email."),e.next=6;break;case 4:return e.next=6,u().then((function(){l("Email successfully verified! Redirecting..."),setTimeout((function(){t.push("/products")}),3e3)})).catch((function(e){I.forEach(e.graphQLErrors,(function(e){return w.b.error(e.message)}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,u,t]),r.a.createElement("h2",null,i)},Wt=a(520).ReactTypeformEmbed,Xt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt,{url:"https://h17g64wdv18.typeform.com/to/Ss9dqZJu",hideHeaders:!0,opacity:0,style:{top:"100px"}}))},Jt=function(){return r.a.createElement("div",{style:{textAlign:"center",marginTop:"35px"}},r.a.createElement(V.a,{tip:"Loading...",size:"large"}))};function Gt(){var e=Object(l.a)(["\n  {\n    me {\n      id\n      email\n      verified\n      permissions\n      name\n    }\n}\n"]);return Gt=function(){return e},e}var Ht=u()(Gt()),Zt=function(){return r.a.createElement("p",null,"Page not found.")},ea=r.a.createContext({id:"",email:"",verified:!1,permissions:[]});var ta=Object(o.g)((function(){var e=Object(m.b)(Ht),t=e.data,a=e.loading,n=t?t.me:null;return r.a.createElement(ea.Provider,{value:n},r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"App"},r.a.createElement(y,{user:n}),r.a.createElement("div",{className:"page-wrapper"},a?r.a.createElement(Jt,null):r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:Ut}),r.a.createElement(o.a,{exact:!0,path:"/signup",component:F}),r.a.createElement(o.a,{exact:!0,path:"/login",component:L}),r.a.createElement(o.a,{exact:!0,path:"/products",component:Pe}),r.a.createElement(o.a,{exact:!0,path:"/inventories",component:Me}),r.a.createElement(o.a,{exact:!0,path:"/customers",component:Ge}),r.a.createElement(o.a,{exact:!0,path:"/expenses",component:Nt}),r.a.createElement(o.a,{exact:!0,path:"/sales",component:Et}),r.a.createElement(o.a,{exact:!0,path:"/requestResetPassword",component:Qt}),r.a.createElement(o.a,{exact:!0,path:"/resetPassword",component:_t}),r.a.createElement(o.a,{exact:!0,path:"/confirmEmail",component:Kt}),r.a.createElement(o.a,{exact:!0,path:"/typeform",component:Xt}),r.a.createElement(o.a,{component:Zt}))))))})),aa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function na(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ra=a(273),ca=a(71),ia=a(130),la=a(360),oa=a(364),sa="https://stark-ridge-28974.herokuapp.com/";console.log("production"),console.log(sa);var ua=Object(oa.a)({uri:sa,credentials:"include"}),ma=new ia.a({link:ua,cache:new la.a({addTypename:!1})});ra.a.initialize("UA-89939726-7"),ra.a.pageview(window.location.pathname+window.location.search),i.a.render(r.a.createElement(p.a,null,r.a.createElement(ca.a,{client:ma},r.a.createElement("div",null,r.a.createElement(ta,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");aa?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):na(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):na(t,e)}))}}()}},[[374,1,2]]]);
//# sourceMappingURL=main.9067ec4a.chunk.js.map